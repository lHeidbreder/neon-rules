\usepackage[english]{babel}
\usepackage{textcomp}
\usepackage{xifthen}
\usepackage{tabularx}
\usepackage{tabto}
\usepackage{multicol}

\usepackage[bookmarks=true,colorlinks=true,linkcolor=Blue]{hyperref}

%Alignment
\usepackage[skip=10mm]{parskip}
\raggedbottom

\usepackage{mdframed}

% Background Gradient
\usepackage[dvipsnames]{xcolor}
\usepackage{background}
\backgroundsetup{
    scale=1,
    angle=0,
    opacity=1,
    contents={\begin{tikzpicture}[remember picture,overlay]
            \path [left color = Black!30,
%            middle color = gray!50,
            right color = CornflowerBlue!30] (current page.south west)rectangle (current page.north east);
    \end{tikzpicture}}
} %taken from https://tex.stackexchange.com/questions/82206/background-color-gradient-for-entire-document

% Title Image
\usepackage{wallpaper}
\def\coverimgpath{../art/\subtitle/cover.png}

%Title Page
\def\titletextcolor{black}
\def\titleshadowcolor{cyan}
\usepackage{shadowtext}
\newcommand{\glowup}[2][cyan]{
    \shadowoffset{1.5pt}
    \shadowcolor{#1}
    \shadowtext{#2}
}
\title{
    \glowup[\titleshadowcolor]{\textcolor{\titletextcolor}{Neon Pen and Paper - \subtitle}}
}
\author{\glowup[\titleshadowcolor]{\textcolor{\titletextcolor}{Fr0sty}}}
\date{\glowup[\titleshadowcolor]{\textcolor{\titletextcolor}{\today}}}

%Fonts
\usepackage{fontspec}
\def\fontpath{../core-rulebook/config/fonts/}
\newfontfamily\heading[Path = \fontpath]{missiondanger}[
	Extension = .ttf,
	BoldFont = missiondangerexpand,
	ItalicFont = missiondangerital,
	BoldItalicFont = missiondangertitleital]
\newfontfamily\subheading[Path = \fontpath]{paladinssemiital}[
	Extension = .ttf,
	BoldFont = paladinslaser,
	ItalicFont = paladinssuperital,
	BoldItalicFont = paladinsexpand]
\newfontfamily\parhead[Path = \fontpath]{Legend}[Extension = .otf]

%Heading formatting
%TODO: try to replace \needspace usage with [nobottomtitles] feature in titlesec
%looks like the cleaner option, but may be less flexible
\usepackage{titlesec}
\usepackage{needspace}
\titleformat{\chapter}{\needspace{30mm} \heading\huge\bfseries}{\thechapter}{20pt}{}%\Huge}
\titleformat{\section}{\needspace{30mm} \subheading}{\thetitle}{18pt}{}
\titleformat{\subsection}{\needspace{30mm} \parhead}{\thetitle}{16pt}{}

%filler images
\usepackage{zref-savepos,graphicx}

%lua scripts
\input{../scripts/lua/lua_scripts.tex}
