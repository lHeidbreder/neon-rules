\usepackage[english]{babel}
\usepackage{textcomp}
\usepackage{xifthen}
\usepackage{tabularx}
\usepackage{tabto}
\usepackage{multicol}

\usepackage[bookmarks=true,colorlinks=true,linkcolor=cyan]{hyperref}

%Alignment
\usepackage[skip=10mm]{parskip}
\raggedbottom

% Background Gradient
\usepackage{background}
\backgroundsetup{
    scale=1,
    angle=0,
    opacity=1,
    contents={\begin{tikzpicture}[remember picture,overlay]
            \path [left color = gray!50,
%            middle color = gray!50,
            right color = gray!20] (current page.south west)rectangle (current page.north east);
    \end{tikzpicture}}
} %taken from https://tex.stackexchange.com/questions/82206/background-color-gradient-for-entire-document
% TODO: this should be [gray!20, gray!50, gray!20] but middle color is ignored

% Title Image
\usepackage{wallpaper}
\def\coverimgpath{../art/\subtitle/cover}

%Title Page
\def\titletextcolor{black}
\def\titleshadowcolor{cyan}
\usepackage{shadowtext}
\newcommand{\glowup}[2][cyan]{
    \shadowoffset{1.5pt}
    \shadowcolor{#1}
    \shadowtext{#2}
}
\title{
    \glowup[\titleshadowcolor]{\textcolor{\titletextcolor}{Neon Pen and Paper - \subtitle}}
}
\author{\glowup[\titleshadowcolor]{\textcolor{\titletextcolor}{Fr0sty}}}
\date{\glowup[\titleshadowcolor]{\textcolor{\titletextcolor}{\today}}}

%Fonts
\usepackage{fontspec}
\def\fontpath{../core-rulebook/config/fonts/}
\newfontfamily\heading[Path = \fontpath]{missiondanger}[
	Extension = .ttf,
	BoldFont = missiondangerexpand,
	ItalicFont = missiondangerital,
	BoldItalicFont = missiondangertitleital]
\newfontfamily\subheading[Path = \fontpath]{paladinssemiital}[
	Extension = .ttf,
	BoldFont = paladinslaser,
	ItalicFont = paladinssuperital,
	BoldItalicFont = paladinsexpand]
\newfontfamily\parhead[Path = \fontpath]{Legend}[Extension = .otf]

%Heading formatting
\usepackage{titlesec}
\titleformat{\chapter}{\heading\huge\bfseries}{\thechapter}{20pt}{}%\Huge}
\titleformat{\section}{\subheading}{\thetitle}{18pt}{}
\titleformat{\subsection}{\parhead}{\thetitle}{16pt}{}

%lua scripts
\input{../scripts/lua/lua_scripts.tex}
